<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>IoT Kegerator: Kegiot</title><link rel="stylesheet" type="text/css" href="styles/styles.css"><script>if ('registerElement' in document
  && 'createShadowRoot' in HTMLElement.prototype
  && 'import' in document.createElement('link')
  && 'content' in document.createElement('template')) {
  // We're using a browser with native WC support!
} else {
  document.write('<script src="x-gif/dist/platform.js"><\/script>')
}
</script></head><body><article><section><div ui-fx="blur1" class="fullscreen"><x-gif src="images/stout.gif" fill stopped></x-gif></div><div class="credit">cinemagraph by <a href="https://www.reddit.com/user/BigMurph26">BigMurph26</a></div><div id="introtip"></div><div id="intro" class="content"><div class="box darken"><h2><small>KegIoT</small></h2><div class="mid">the</div><h3><small>DIY IoT Kegerator</small></h3><div class="mid">by</div><div class="line"><h4>Adam Eivy <span class="rotate">\[._.]/</span><div class="me center"></div></h4></div><h6>Slides:<a href="http://bit.ly/kegiot">&nbsp; bit.ly/kegiot</a></h6></div></div></section><section class="fullscreen oldmath"><div class="content"><div class="box"><h2>What</h2><ul><li>Smart IoT Beverage Dispenser</li><li>Custom Software</li><li>Mix of BBB and Custom HW</li><li>Modified Fridge</li><li>All DIY</li></ul></div></div></section><section><div ui-fx="blur2" class="fullscreen"><x-gif src="images/thinking_fred.gif" fill stopped ping-pong n-times="3"></x-gif></div><div class="content"><div class="box"><h2>Timeline</h2><ul><li>Oct 2014: Idea</li><li>June 2015: Let's do this!</li><li>~ 1 week of work</li></ul></div></div></section><section class="fullscreen xv organic"><div class="content"><div class="box"><h2>Investment</h2><ul><li>~30 hours together</li><li>~90 individual person hours</li><li>Worked lunch, nights and 1 whole day (my garage)</li><li>~$450 for all hardware including fridge</li></ul></div></div></section><section class="fullscreen"><img src="images/team.jpg" class="fillh solo"><div class="content"><h4 class="alert alert-info">The Team</h4></div></section><section class="fullscreen"><div class="content"><img src="images/step1.jpg"></div></section><section class="fullscreen"><div class="content"><img src="images/process_assembly.jpg"></div></section><section><div class="fullscreen"><img src="images/usecases.jpg" class="fillh"></div></section><section class="fullscreen"><img src="images/kegiot_hla.svg" class="fillh"></section><section><div class="fullscreen fullscreen gplay"></div><div class="content"><div class="box darken"><h2>The Basics</h2><ul><li>Danby Mini Fridge (Costco)</li><li>CO2 Tank, 5 Lbs</li><li>Corny Key, 5 Gal</li></ul></div></div></section><section><div class="fullscreen"></div><div class="content"><h2>Rate Limiting</h2><ul><li>BeagleBone Black, RevC</li><li>RFID Reader/Module, 125 KHz</li><li>Flow Meter</li><li>Solenoid + Ball Valve</li></ul></div></section><section><div class="fullscreen"><img src="images/bbb.jpg" class="fillh"></div><div class="content"><h2>Beagle Bone Black</h2><ul><li class="alert alert-info">Debian Linux</li><li class="alert alert-success">Node.JS</li></ul></div></section><section><div class="fullscreen"><img src="images/Cloud9_Screen.png" class="fillh"></div><div class="content"><div class="box"><h2><a href="http://beagleboard.org/support/bonescript">BoneScript</a></h2><div class="mid">or</div><h2>Node (fs, etc)</h2><div class="mid">or</div><h2>Linux System Commands (i2c, etc)</h2></div></div></section><section class="fullscreen"><div class="content"><img src="images/rfid.jpg" class="fillh"></div></section><section><div class="fullscreen"></div><div class="content"><h2>RFID Read</h2><pre><code class="language-javascript">var DEVICE_ID = '/dev/serial/by-id/usb-FTDI_FT232R_USB_UART_AI02KO15-if00-port0';
var readableStream = fs.createReadStream(DEVICE_ID);
readableStream.on('data', function(data) {
  callback(data.toString('hex'));
});
readableStream.on('close', function() {
  common.command('forever restartall');
});
</code></pre></div></section><section class="fullscreen"><div class="content"><img src="images/process_rfidcards.jpg"></div></section><section><div class="fullscreen"></div><div class="content"><h4>User Flow</h4><img src="images/kegiot_flow.png" height="100%" class="filh"></div></section><section><div class="fullscreen"></div><div class="content"><h2>Enhancements</h2><ul><li>LCD 16x2 Black & White</li><li>Custom Cape, IC2 support</li><li>Temperature Sensor</li></ul></div></section><section class="fullscreen"><div class="content"><img src="images/process_lcd.jpg"></div></section><section><div class="fullscreen"><img src="images/lcd.jpg" class="fillh"></div></section><section><div class="fullscreen"></div><div class="content"><h2>LCD</h2><pre><code class="language-javascript">...
clear: function(cb) {
  // console.log('lcd:clear');
  runCommand('i2cset -y 1 0x04 0x63 0x40 0x00 0x00 i', cb);
},
home: function(cb) {
  // console.log('lcd:home');
  runCommand('i2cset -y 1 0x04 0x68 0x40 0x00 0x00 i', cb);
},
print: function(str, cb) {
...
</code></pre></div></section><section><div class="fullscreen"></div><div class="content"><h2>Slack Integration</h2><ul><li>Cheap Admin Discovery</li><li>Temperature Threshold Alerts</li><li>Keg Volume Alerts</li></ul><img src="images/alerts.png"></div></section><section><div class="fullscreen"></div><div class="content"><h2>Admin Panel</h2><ul><li>Simple UI: <span class="alert alert-info">Backbone</span> | <span class="alert alert-info">Bootstrap</span></li><li>LowDB <span class="alert alert-detail">JSON</span> files</li><li>Socket.io <span class="alert alert-info">websockets</span></li></ul></div></section><section><div class="fullscreen"><img src="images/admin_dashboard.png" class="fillh"></div></section><section><div class="fullscreen"><img src="images/admin_configs.png" class="fillh"></div></section><section><div class="fullscreen"><img src="images/admin_users.png" class="fillh"></div></section><section><div class="content"><div class="box"><h2>Local Testing</h2><pre class="big"><code class="language-javascript">if (process.env.MODE === 'desktop') {
  var _ = require('./_');
  module.exports.readTemperature = function(callback) {
    callback(_.random(37, 38)); // dummy data
  }
} else {
  var bs = require('bonescript');
  var SENSOR_PIN = 'P9_40';
  ...
}
</code></pre></div></div></section><section><div class="fullscreen"></div><div class="content"><h2>Challenges</h2><ul><li>We suck at industrial design</li><li>Stepping voltage (<span class="alert alert-danger">fried</span> temp sensor)</li><li>IC2 and Foreign HW</li><li>RFID/USB <span class="alert alert-warning">Disconnecting</span></li><li>Cleaning the Valve</li><li><span class="alert alert-detail">Filling</span> Corny Kegs</li></ul></div></section><section class="fullscreen"><div class="content"><img src="images/spigot.jpg" class="fillh"></div></section><section class="fullscreen gplay tint"><div class="content"><h2>Lessons</h2><div class="mid">from</div><h2>Use</h2><div class="mid">(or lack thereof)</div></div></section><section><div class="fullscreen"><x-gif src="images/perfect_beardscratch.gif" fill stopped></x-gif></div><div class="content bottom"><div class="box quote"><span class="alert alert-success">Lesson:</span> Change from <span class="alert alert-danger">root</span> user</div></div><div class="credit">cinemagraph thanks to :&nbsp;<a href="http://www.gideondevilliers.com">gideon de villiers</a></div></section><section><div ui-fx="blur3" class="fullscreen"><x-gif src="images/beerdrink.gif" fill n-times="1" speed="1.5" stopped></x-gif></div><div class="content bottom"><div class="box quote"><span class="alert alert-success">Lesson:</span> Drink Frequently :)</div></div></section><section><div class="fullscreen"><img src="images/parts.jpg" class="fillh"></div><div class="content"><div class="box darker"><h2>Parts</h2><ul class="tight"><li><a target="ebay" href="http://www.newark.com/element14/bbone-black-4g/beaglebone-black-rev-c-cortex/dp/52X5548?CMP=KNC-GUSA-GEN-SHOPPING-NEW-ELEMENT14&amp;ad=81605889141&amp;gclid=CjwKEAjwubK4BRC1xczKrZyj3mkSJAC6ntgru3xrlhe3PNunJVF3JnYOihhrgXcyFkMfnMyDIMERsxoCAvzw_wcB">Beagle Bone Black</a></li><li><a target="ebay" href="http://www.ebay.com/itm/New-Blue-IIC-I2C-TWI-1602-16x2-Serial-LCD-Module-Display-for-Arduino-/221439853893?hash=item338ed80545:g:Y~MAAOxycD9TTI1f">LCD</a></li><li><a target="ebay" href="http://www.ebay.com/itm/10Pcs-L293D-L293-Push-Pull-Four-Channel-Motor-Driver-IC-DIP-16-NEW-GM-/262136736016?hash=item3d08912910:g:h-kAAOSwSHZWe2oz">Push-Pull 4 Channel Motor Driver</a></li><li><a target="ebay" href="http://www.ebay.com/itm/5pcs-4-Channel-I2C-IIC-Logic-Level-Converter-Module-Bi-Directional-for-Arduino-/201384052982?hash=item2ee36cc8f6:g:SJAAAOSw3ydVm2Z9">I2C IIC Logic Level Converter Module</a></li><li><a target="ebay" href="http://www.ebay.com/itm/New-ATMEGA328-5V-16Mhz-Replace-ATmega168-For-Arduino-Pro-Mini-Compatible-Nano-/191117208428?hash=item2c7f792b6c:g:-PgAAOxyjxlTNTP8">ATMEGA328</a></li><li><a target="ebay" href="http://www.ebay.com/itm/5pcs-TMP36GT9-ORIGINAL-Low-Voltage-Temperature-Sensors-NEW-/381374564339?hash=item58cbb207f3:g:5XYAAOSwcwhVKm5O">Temperature Sensors</a></li><li><a target="ebay" href="http://www.ebay.com/itm/50Pairs-15cm-SM-3Pin-22AWG-Wire-Male-and-Female-Connectors-Pitch-2-54mm-/171927560780?hash=item2807ae624c:g:ZhYAAOSwG-1W1asC">Wire Connectors</a></li><li><a target="ebay" href="http://www.ebay.com/itm/New-DC12V-1-2-SS304-Motorized-Ball-Valve-CR-05-Electrical-Ball-Valve-US-Stock-/321746225244?hash=item4ae991c85c:g:3lAAAOSwPcJVSDrQ">Motorized Ball Valve</a></li><li><a target="ebay" href="http://www.ebay.com/itm/One-25ft-Roll-Electrical-Wire-22-Gauge-Solid-Core-22awg-/111943223318?var=&amp;hash=item1a10560816:m:mSMMrphVViaZ6u9KpMr6_qw">Wire</a></li><li><a target="ebay" href="http://www.ebay.com/itm/5pcs-Double-side-Protoboard-Circuit-Universal-DIY-Prototype-PCB-Board-6x8cm-New-/371389482753?hash=item567889c701:g:3HMAAOSwHnFVrMSr">Protoboard</a></li><li><a target="ebay" href="http://www.ebay.com/itm/10-Pcs-40Pin-2-54mm-Single-Row-Straight-Female-Pin-Header-for-Arduino-USA-Seller-/181904105863?hash=item2a5a546187:g:jHwAAOSwT6pVlF85">Female Pin Header</a></li><li><a target="ebay" href="http://www.ebay.com/itm/ATMEL-ATTINY84A-PU-8-Bit-Microcontroller-Low-Power-High-Performance-Attiny-/231792924328?hash=item35f7ef56a8:g:tawAAOSwhkRWe6J9">8 Bit Microcontroller</a></li><li><a target="ebay" href="http://www.amazon.com/Perfect-Pour-Chalkboard-Display-Kegerator/dp/B00TOORL1Y/ref=sr_1_4?ie=UTF8&amp;qid=1460611986&amp;sr=8-4&amp;keywords=tap+handle">Chalkboard Tap Handle</a></li></ul></div></div></section><section class="fullscreen"><div class="content"><img src="images/flange.jpg" class="fillh"></div></section><section><div class="fullscreen"></div><div class="content"><h2>Next Steps</h2><ul><li>Log Rotation</li><li>Wifi</li><li>Improve USB/RFID Disconnect Handling</li><li>Analytics</li><li>Replace Fried Temp Sensor</li></ul></div></section><section class="fullscreen"><img src="images/clink.jpeg" class="fillw"><!--.fullscreen(ui-fx="blur3")--><!--x-gif(src="images/drink.gif" fill stopped speed=".5")--><div class="content"><div class="box"><div class="mid">Questions?</div><div class="line"><div class="me center"></div></div><h4>\[._.]/ <a href='http://adameivy.com'>Adam Eivy</a></h4><h6>Slides:<a href="http://bit.ly/kegiot">&nbsp; bit.ly/kegiot</a></h6><h6>Code:<a href="https://github.com/atomantic/kegiot">&nbsp; github.com/atomantic/kegiot</a></h6><h6>Twitter:<a href="https://twitter.com/antic">&nbsp; @antic</a></h6><small><a href="#1">&nbsp; restart</a></small></div></div></section></article><script src="scripts/scripts.js"></script><link rel="import" href="x-gif/dist/x-gif.html"></body></html>